#include <REGX51.H>
		ORG 0000H
	MOV SCON,#50H
		MOV TMOD,#20H
		MOV TH1,#0FDH

AGAIN:		MOV P1,#0FFH
			MOV P3,#00H
			ACALL DELAY
	MOV A,P1
		ANL A,#00000111B
		CJNE A,#00000111B,CHECK
		AJMP AGAIN
CHECK: MOV P3,#00000111B
		MOV A,P1
		ANL A,#00000111B
		CJNE A,#00000111B,CH

		MOV P3,#00001011B
		MOV A,P1
		ANL A,#00000111B
		CJNE A,#00000111B,CH

 	   	MOV P3,#00001101B
		MOV A,P1
		ANL A,#00000111B
		CJNE A,#00000111B,CH

	   MOV P3,#00001110B
		MOV A,P1
		ANL A,#00000111B
		CJNE A,#00000111B,CH
	
	  
/*CH:  RRC A
	JNC GO
	AJMP CH		 
	


CH:	 MOV DPTR,#02FFH
 	SETB TR1
		CLR A
		MOVC A,@A+DPTR
		MOV SBUF,A
HERE:	JNB TI,HERE
		CLR TI
		CLR A
		AJMP AGAIN */

CH: SETB TR1
	CLR TI
	MOV SBUF,#"A"

HER:	JNB TI,HER
	CLR TI
	LJMP AGAIN


DELAY:  mov r3,#02h
HE2:		MOV R0,#0FFH
HE1:		MOV R1,#0FFH
HE:		DJNZ R1,HE
		DJNZ R0,HE1
		DJNZ R3,HE2
		RET

		
		
		ORG 02FFH
		DB "A"

END		